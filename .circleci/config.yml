version: 2.1
orbs:
  cypress: cypress-io/cypress@1
  react: thefrontside/react@0.1.0
workflows:
  push:
    jobs:
      - working_directory: ~/devops-boilerplate/
      - cd react-client react/install
      - react/test:
          requires:
            - react/install
  build:
    jobs:
      - cypress/run:
          yarn: false
          start: npm start
          wait-on: 'http://localhost:3000'
          no-workspace: true